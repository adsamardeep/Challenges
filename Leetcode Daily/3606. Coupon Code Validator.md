# ğŸ· Validate and sort active coupons by business line

## ğŸ“œ Problem Statement
Given lists of coupon codes, their associated business lines, and activation flags, return all **valid and active** coupon codes. A coupon is valid if it is non-empty, contains only alphanumeric characters or underscores, belongs to an allowed business line, and is marked active. The result must be sorted by business line first, then by coupon code.

## ğŸ” Example Input/Output
**Input:**
```python
code = ["SAVE10", "FOOD_5", "BAD-CODE", ""]
businessLine = ["electronics", "grocery", "grocery", "pharmacy"]
isActive = [True, True, True, True]
````

**Output:**

```python
["SAVE10", "FOOD_5"]
```

(Explanation: `"BAD-CODE"` fails regex validation, and the empty string is invalid. The remaining coupons are active and sorted by business line, then code.)

## ğŸ§  Approach

1. Iterate through the three lists simultaneously using `zip`.
2. Filter coupons that satisfy all conditions:

   * `isActive` is `True`,
   * coupon code is non-empty,
   * coupon code matches the regex `[A-Za-z0-9_]+`,
   * business line is one of the allowed categories.
3. Store `(coupon, businessLine)` pairs for valid entries.
4. Sort these pairs by `(businessLine, coupon)` lexicographically.
5. Extract and return only the coupon codes from the sorted result.

## ğŸ’» Code 

```python
import re
from typing import List

class Solution:
    def validateCoupons(self, code: List[str], businessLine: List[str], isActive: List[bool]) -> List[str]:
        return [
            c for c, _ in sorted(
                (
                    (c, b)
                    for c, b, a in zip(code, businessLine, isActive)
                    if a
                    and c
                    and bool(re.fullmatch(r"[A-Za-z0-9_]+", c))
                    and b in ["electronics", "grocery", "pharmacy", "restaurant"]
                ),
                key=lambda x: (x[1], x[0])
            )
        ]
```

## â± Complexity Analysis

* Time complexity: **O(n log n)**, where `n` is the number of coupons (filtering is O(n), sorting dominates).
* Space complexity: **O(n)** for storing the filtered and sorted coupon pairs.

## ğŸ§ª Edge Cases

* All coupons inactive â†’ returns an empty list.
* Coupon code is an empty string or `None` â†’ excluded.
* Coupon code contains special characters like `-` or `@` â†’ excluded by regex.
* Business line not in the allowed set â†’ excluded.
* Duplicate valid coupons â†’ preserved and sorted normally.
* Mismatched list lengths â†’ `zip` safely processes up to the shortest list.

```
```
