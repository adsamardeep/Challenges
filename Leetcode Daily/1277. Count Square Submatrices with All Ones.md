# ‚¨ú Problem: Count Square Submatrices with All Ones

## üìú Problem Statement
Given a binary matrix `matrix` of size `n √ó m`, return the **total number of square submatrices** that contain **only 1‚Äôs**.

---

## üîç Example 1
**Input**
```python
matrix = [
  [0,1,1,1],
  [1,1,1,1],
  [0,1,1,1]
]
```

**Explanation**
- Squares of size `1x1` ‚Üí 10  
- Squares of size `2x2` ‚Üí 4  
- Squares of size `3x3` ‚Üí 1  
Total = **15**

**Output**
```
15
```

---

## üîç Example 2
**Input**
```python
matrix = [
  [1,0,1],
  [1,1,0],
  [1,1,0]
]
```

**Explanation**
- Squares of size `1x1` ‚Üí 6  
- Squares of size `2x2` ‚Üí 2  
Total = **8**

**Output**
```
8
```

---

## üß† Approach
We use **Dynamic Programming (DP)**:
1. Define `dp[i][j]` as the size of the largest square ending at cell `(i, j)`.
2. Transition:
   - If `matrix[i][j] == 1`:
     \[
     dp[i][j] = 1 + \min(dp[i-1][j], dp[i][j-1], dp[i-1][j-1])
     \]
   - Else:
     \[
     dp[i][j] = 0
     \]
3. Each `dp[i][j]` contributes its value to the total count (since a square of size `k` contains all smaller squares too).

---

## üíª Code Implementation
```python
class Solution:
    def countSquares(self, matrix):
        n = len(matrix)
        m = len(matrix[0])

        cnt = 0
        dp = [[0] * m for _ in range(n)]

        # Initialize first column
        for i in range(n):
            dp[i][0] = matrix[i][0]
        # Initialize first row
        for j in range(m):
            dp[0][j] = matrix[0][j]

        # Fill DP table
        for i in range(1, n):
            for j in range(1, m):
                if matrix[i][j] == 1:
                    dp[i][j] = 1 + min(dp[i-1][j-1],
                                       dp[i-1][j],
                                       dp[i][j-1])

        # Count all squares
        for i in range(n):
            for j in range(m):
                cnt += dp[i][j]

        return cnt
```

---

## ‚è± Complexity Analysis
- **Time Complexity:** O(n √ó m) ‚Äì each cell is processed once.  
- **Space Complexity:** O(n √ó m) ‚Äì DP table used.  
  (Can be optimized to O(m) using 1D DP).

---

## üß™ Edge Cases
- Matrix with all `0`s ‚Üí result = 0  
- Matrix with all `1`s ‚Üí result = total number of all possible squares  
- Single row/column matrix  
