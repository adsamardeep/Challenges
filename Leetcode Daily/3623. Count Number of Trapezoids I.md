# Count Trapezoids in a Set of Points

## ğŸ“œ Problem Statement
You are given a list of 2D points. A **trapezoid** is formed when you pick **two distinct horizontal lines** (same y-coordinate) and choose **one pair of points** from each line.  
Each line with `k` points contributes `k choose 2` horizontal segments.  
The task is to count how many trapezoids can be formed using this logic, modulo **1,000,000,007**.

---

## ğŸ” Example Input/Output
**Input:**  
points = \[\[0,1], \[2,1], \[1,3], \[3,3]\]

**Explanation:**  
- y = 1 â†’ 2 points â†’ 1 segment  
- y = 3 â†’ 2 points â†’ 1 segment  

Trapezoids = 1 Ã— 1 = **1**

---

## ğŸ§  Approach
1. Group points by their **y-coordinate**.
2. For each group with `count = k`, compute number of horizontal segments:  
   \[
   \frac{k(k-1)}{2}
   \]
3. Maintain a running total of all previous line-segments.
4. When processing a new line:
   - New trapezoids = `(previous_total_segments * current_line_segments)`
5. Update the running total and continue.
6. Return result modulo \(10^9 + 7\).

---

## ğŸ’» Code
```python
from typing import List
from collections import defaultdict

class Solution:
    def countTrapezoids(self, points: List[List[int]]) -> int:
        MOD = 1000000007
        groups = defaultdict(int)

        # Count how many points exist for each y-coordinate
        for _, y in points:
            groups[y] += 1

        res = 0
        total = 0

        # For each horizontal level
        for y, count in groups.items():
            lines = count * (count - 1) // 2  # number of horizontal pairs on this line
            res = (res + total * lines) % MOD
            total = (total + lines) % MOD

        return res
````

---

## â± Complexity Analysis

* **Time:** (O(n)) â€” single pass to group + single pass over groups
* **Space:** (O(m)) â€” m = number of distinct y-values

---

## ğŸ§ª Edge Cases

* All points on the same y â†’ 0 trapezoids
* All unique y-values â†’ 0 trapezoids
* Large number of points â†’ ensure modulo arithmetic
* Negative coordinates â†’ still valid since only y-values matter

```
```
