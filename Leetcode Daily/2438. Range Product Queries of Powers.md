# üí° Problem: Product of Powers of Two in Range Queries

## üìú Problem Statement
You are given:
- An integer `num`
- A list of queries `queries`, where each query is of the form `[p, q]`

First:
- Decompose `num` into **powers of two** based on its binary representation.

Then:
- For each query `[p, q]`, calculate the **product** of the powers from index `p` to `q` (inclusive), modulo **10^9 + 7**.

---

## üîç Example 1
**Input**
```
num = 15
queries = [[0,1], [1,2]]
```

**Step-by-step**
```
Binary of 15: 1111  
Powers of two: [1, 2, 4, 8] (from least significant to most significant bit)

Query 1: [0, 1] ‚Üí 1 * 2 = 2
Query 2: [1, 2] ‚Üí 2 * 4 = 8
```

**Output**
```
[2, 8]
```

---

## üîç Example 2
**Input**
```
num = 46
queries = [[0,0], [0,2], [1,3]]
```

**Step-by-step**
```
Binary of 46: 101110  
Powers of two: [2, 4, 8, 32]

Query 1: [0, 0] ‚Üí 2
Query 2: [0, 2] ‚Üí 2 * 4 * 8 = 64
Query 3: [1, 3] ‚Üí 4 * 8 * 32 = 1024
```

**Output**
```
[2, 64, 1024]
```

---

## üß† Approach
1. **Extract Powers of Two from `num`**  
   - Use bit manipulation: `lowBit = num & -num` to get the lowest set bit.  
   - Subtract it from `num` until `num` becomes 0.

2. **Precompute Products in a Table**  
   - Create a 2D table where `table[i][j]` stores the product of powers from index `i` to `j`.
   - This allows O(1) query retrieval.

3. **Answer Each Query**  
   - Directly return the precomputed value modulo 10^9 + 7.

---

## üíª Code Implementation
```python
class Solution:
    def productQueries(self, num: int, queries: List[List[int]]) -> List[int]:
        powers = []
        while num:
            lowBit = num & -num
            powers.append(lowBit)
            num ^= lowBit

        size = len(powers)
        table = [[0] * size for _ in range(size)]
        for row, val in enumerate(powers):
            table[row][row] = val
            for col in range(row + 1, size):
                table[row][col] = (
                    table[row][col - 1] * powers[col] % (10**9 + 7)
                )

        return [table[p][q] for p, q in queries]
```

---

## ‚è± Complexity Analysis
- **Time Complexity:**  
  - Extracting powers: O(log num)  
  - Building table: O(k¬≤) where k = number of set bits in `num`  
  - Answering queries: O(1) each
- **Space Complexity:** O(k¬≤) for the product table

---

## üß™ Edge Cases
- `num` is a power of two ‚Üí powers list has one element
- Queries where `p = q` ‚Üí returns that single power
- Large `num` with many set bits
